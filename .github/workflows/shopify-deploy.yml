name: Shopify Deploy

on:
  push:
    branches: [main]
  workflow_dispatch:

jobs:
  deploy-theme:
    runs-on: ubuntu-latest

    steps:
    - name: "‚¨áÔ∏è Checkout repository"
      uses: actions/checkout@v3

    - name: "üì¶ Setup Node.js"
      uses: actions/setup-node@v3
      with:
        node-version: 18

    - name: "üõ† Install Shopify CLI"
      run: npm install -g @shopify/cli @shopify/theme

    - name: "üöÄ Deploy theme to Shopify"
      env:
        SHOPIFY_STORE_DOMAIN: ${{ secrets.SHOPIFY_STORE_DOMAIN }}
        SHOPIFY_ACCESS_TOKEN: ${{ secrets.SHOPIFY_ACCESS_TOKEN }}
      run: |
        shopify theme push \
          --path=. \
          --store="$SHOPIFY_STORE_DOMAIN" \
          --password="$SHOPIFY_ACCESS_TOKEN" \
          --unpublished
